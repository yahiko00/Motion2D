{"version":3,"sources":["dist/motion2d.js"],"names":["__extends","this","d","b","__","constructor","p","hasOwnProperty","prototype","Object","create","factory","module","exports","v","require","undefined","define","amd","geometry2d_1","hitbox2d_1","defineProperty","value","default","Motion2D","Mobile","x","y","maxSpeed","direction","hitbox","velocity","setMaxSpeed","setDirection","angleRad","setVelocity","limitVector","lengthSqVector","EPSILON","unitVectorToAngle","normalizeVector","updatePosition","moveXY","unitVector","speed","multVectorByScalar","Math","min","moveToDirection","vector","angleToUnitVector","moveToPoint","point","subVectors","stop","NULL_VEC","setDirectionToPoint","getSpeed","lengthVector","SteeringMobile","_super","mass","path","currentPathNode","call","acceleration","pathDirection","updateVelocity","divVectorByScalar","addVectors","nextVelocity","flee","prefVelocity","seek","seekArrival","slowingRadius","distance","seekRandomPoint","maxX","maxY","random","pursuit","target","tickAhead","futureTarget","adaptativePursuit","evade","adaptativeEvade","avoidObstacles","obstacles","avoidance","radius","isCircle","isAABox","max","halfDimX","halfDimY","aheadDistance","getAheadDistance","ahead","scaleVector","ahead2","ahead3","mostThreateningObstacle","findMostThreateningObstacle","getAheadArea","area","i","length","obstacle","isCollision","pointInHitbox","followPath","tolerance","backAndForth","distanceSq","moveAround","clockwise","toPoint","contact","attraction","tangent","tangentUnitVectorCircle","moveFront","targetDirectionVector","toTarget","a1","a2","abs","PI","determinant","detVectors","moveBehind"],"mappings":"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","file":"dist/motion2d.min.js"}